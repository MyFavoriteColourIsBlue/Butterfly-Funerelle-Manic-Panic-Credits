[gd_scene load_steps=28 format=3 uid="uid://dwxrp8l8qafcm"]

[ext_resource type="Script" uid="uid://tvu76tp4vk8v" path="res://killer/scripts/killer.gd" id="1_yeftd"]
[ext_resource type="PackedScene" uid="uid://bjc5fjkgo870l" path="res://GeneralNodes/hurtbox/hurt_box.tscn" id="2_noqj8"]
[ext_resource type="PackedScene" uid="uid://bynru2vd1s3yg" path="res://GeneralNodes/hitbox/hit_box.tscn" id="3_2vw7o"]
[ext_resource type="Texture2D" uid="uid://cqbeftuu0f0d5" path="res://killer/Trinadowlanne_testing/Trinadowlanne_sprite.png" id="4_oyv7d"]
[ext_resource type="Script" uid="uid://bqp0jut6x5a5x" path="res://killer/scripts/killer_state_machine.gd" id="5_eyuaa"]
[ext_resource type="Script" uid="uid://cvvyyp6u2hf8k" path="res://killer/scripts/states/killer_state_idle.gd" id="6_ppofv"]
[ext_resource type="Script" uid="uid://bd886ju43nmyp" path="res://killer/scripts/states/killer_state_stun.gd" id="7_dq1m6"]
[ext_resource type="Script" uid="uid://10obddpa80jv" path="res://killer/scripts/states/killer_state_wander.gd" id="8_xy18j"]
[ext_resource type="Script" uid="uid://5amj76pk0s72" path="res://killer/scripts/states/killer_state_destroy.gd" id="9_yyq81"]
[ext_resource type="Script" uid="uid://wsj880qbms4u" path="res://killer/scripts/states/killer_state_chase.gd" id="10_adseb"]
[ext_resource type="PackedScene" uid="uid://dxicvx0a002mn" path="res://killer/vision_area.tscn" id="11_fjut8"]

[sub_resource type="CircleShape2D" id="CircleShape2D_a2eqe"]

[sub_resource type="CircleShape2D" id="CircleShape2D_i52ds"]
radius = 30.0

[sub_resource type="Animation" id="Animation_i52ds"]
length = 0.001
tracks/0/type = "value"
tracks/0/imported = false
tracks/0/enabled = true
tracks/0/path = NodePath("Sprite2D:frame")
tracks/0/interp = 1
tracks/0/loop_wrap = true
tracks/0/keys = {
"times": PackedFloat32Array(0),
"transitions": PackedFloat32Array(1),
"update": 1,
"values": [1]
}

[sub_resource type="Animation" id="Animation_cf4tw"]
resource_name = "chase_back"
length = 0.45
loop_mode = 1
tracks/0/type = "value"
tracks/0/imported = false
tracks/0/enabled = true
tracks/0/path = NodePath("Sprite2D:frame")
tracks/0/interp = 1
tracks/0/loop_wrap = true
tracks/0/keys = {
"times": PackedFloat32Array(0, 0.15, 0.3, 0.45),
"transitions": PackedFloat32Array(1, 1, 1, 1),
"update": 1,
"values": [19, 21, 23, 25]
}

[sub_resource type="Animation" id="Animation_j4gvi"]
resource_name = "chase_front"
length = 0.45
loop_mode = 1
tracks/0/type = "value"
tracks/0/imported = false
tracks/0/enabled = true
tracks/0/path = NodePath("Sprite2D:frame")
tracks/0/interp = 1
tracks/0/loop_wrap = true
tracks/0/keys = {
"times": PackedFloat32Array(0, 0.15, 0.3, 0.45),
"transitions": PackedFloat32Array(1, 1, 1, 1),
"update": 1,
"values": [9, 11, 13, 17]
}

[sub_resource type="Animation" id="Animation_adseb"]
resource_name = "chase_left"
length = 0.45
loop_mode = 1
tracks/0/type = "value"
tracks/0/imported = false
tracks/0/enabled = true
tracks/0/path = NodePath("Sprite2D:frame")
tracks/0/interp = 1
tracks/0/loop_wrap = true
tracks/0/keys = {
"times": PackedFloat32Array(0, 0.15, 0.3, 0.45),
"transitions": PackedFloat32Array(1, 1, 1, 1),
"update": 1,
"values": [27, 29, 33, 27]
}

[sub_resource type="Animation" id="Animation_fjut8"]
resource_name = "chase_right"
length = 0.45
loop_mode = 1
tracks/0/type = "value"
tracks/0/imported = false
tracks/0/enabled = true
tracks/0/path = NodePath("Sprite2D:frame")
tracks/0/interp = 1
tracks/0/loop_wrap = true
tracks/0/keys = {
"times": PackedFloat32Array(0, 0.15, 0.3, 0.45),
"transitions": PackedFloat32Array(1, 1, 1, 1),
"update": 1,
"values": [41, 39, 37, 35]
}

[sub_resource type="Animation" id="Animation_0ncj4"]
resource_name = "idle_back"
length = 0.45
loop_mode = 1
tracks/0/type = "value"
tracks/0/imported = false
tracks/0/enabled = true
tracks/0/path = NodePath("Sprite2D:frame")
tracks/0/interp = 1
tracks/0/loop_wrap = true
tracks/0/keys = {
"times": PackedFloat32Array(0),
"transitions": PackedFloat32Array(1),
"update": 1,
"values": [7]
}

[sub_resource type="Animation" id="Animation_onaj8"]
resource_name = "idle_front"
length = 0.45
loop_mode = 1
tracks/0/type = "value"
tracks/0/imported = false
tracks/0/enabled = true
tracks/0/path = NodePath("Sprite2D:frame")
tracks/0/interp = 1
tracks/0/loop_wrap = true
tracks/0/keys = {
"times": PackedFloat32Array(0),
"transitions": PackedFloat32Array(1),
"update": 1,
"values": [1]
}

[sub_resource type="Animation" id="Animation_ee3y6"]
resource_name = "idle_left"
length = 0.45
loop_mode = 1
tracks/0/type = "value"
tracks/0/imported = false
tracks/0/enabled = true
tracks/0/path = NodePath("Sprite2D:frame")
tracks/0/interp = 1
tracks/0/loop_wrap = true
tracks/0/keys = {
"times": PackedFloat32Array(0),
"transitions": PackedFloat32Array(1),
"update": 1,
"values": [3]
}

[sub_resource type="Animation" id="Animation_74m6i"]
resource_name = "idle_right"
length = 0.45
loop_mode = 1
tracks/0/type = "value"
tracks/0/imported = false
tracks/0/enabled = true
tracks/0/path = NodePath("Sprite2D:frame")
tracks/0/interp = 1
tracks/0/loop_wrap = true
tracks/0/keys = {
"times": PackedFloat32Array(0),
"transitions": PackedFloat32Array(1),
"update": 1,
"values": [5]
}

[sub_resource type="Animation" id="Animation_j0pjo"]
resource_name = "walk_back"
length = 0.45
loop_mode = 1
tracks/0/type = "value"
tracks/0/imported = false
tracks/0/enabled = true
tracks/0/path = NodePath("Sprite2D:frame")
tracks/0/interp = 1
tracks/0/loop_wrap = true
tracks/0/keys = {
"times": PackedFloat32Array(0, 0.15, 0.3, 0.45),
"transitions": PackedFloat32Array(1, 1, 1, 1),
"update": 1,
"values": [19, 21, 23, 25]
}

[sub_resource type="Animation" id="Animation_6oyq6"]
resource_name = "walk_front"
length = 0.45
loop_mode = 1
tracks/0/type = "value"
tracks/0/imported = false
tracks/0/enabled = true
tracks/0/path = NodePath("Sprite2D:frame")
tracks/0/interp = 1
tracks/0/loop_wrap = true
tracks/0/keys = {
"times": PackedFloat32Array(0, 0.15, 0.3, 0.45),
"transitions": PackedFloat32Array(1, 1, 1, 1),
"update": 1,
"values": [9, 11, 13, 17]
}

[sub_resource type="Animation" id="Animation_v447j"]
resource_name = "walk_left"
length = 0.45
loop_mode = 1
tracks/0/type = "value"
tracks/0/imported = false
tracks/0/enabled = true
tracks/0/path = NodePath("Sprite2D:frame")
tracks/0/interp = 1
tracks/0/loop_wrap = true
tracks/0/keys = {
"times": PackedFloat32Array(0, 0.15, 0.3, 0.45),
"transitions": PackedFloat32Array(1, 1, 1, 1),
"update": 1,
"values": [27, 29, 33, 27]
}

[sub_resource type="Animation" id="Animation_a2eqe"]
resource_name = "walk_right"
length = 0.45
loop_mode = 1
tracks/0/type = "value"
tracks/0/imported = false
tracks/0/enabled = true
tracks/0/path = NodePath("Sprite2D:frame")
tracks/0/interp = 1
tracks/0/loop_wrap = true
tracks/0/keys = {
"times": PackedFloat32Array(0, 0.15, 0.3, 0.45),
"transitions": PackedFloat32Array(1, 1, 1, 1),
"update": 1,
"values": [41, 39, 37, 35]
}

[sub_resource type="AnimationLibrary" id="AnimationLibrary_i52ds"]
_data = {
&"RESET": SubResource("Animation_i52ds"),
&"chase_back": SubResource("Animation_cf4tw"),
&"chase_front": SubResource("Animation_j4gvi"),
&"chase_left": SubResource("Animation_adseb"),
&"chase_right": SubResource("Animation_fjut8"),
&"idle_back": SubResource("Animation_0ncj4"),
&"idle_front": SubResource("Animation_onaj8"),
&"idle_left": SubResource("Animation_ee3y6"),
&"idle_right": SubResource("Animation_74m6i"),
&"walk_back": SubResource("Animation_j0pjo"),
&"walk_front": SubResource("Animation_6oyq6"),
&"walk_left": SubResource("Animation_v447j"),
&"walk_right": SubResource("Animation_a2eqe")
}

[node name="Trinadowlanne" type="CharacterBody2D"]
collision_layer = 256
script = ExtResource("1_yeftd")

[node name="HurtBox" parent="." instance=ExtResource("2_noqj8")]

[node name="CollisionShape2D" type="CollisionShape2D" parent="HurtBox"]
position = Vector2(0, -26)
scale = Vector2(4, 4)
shape = SubResource("CircleShape2D_a2eqe")
debug_color = Color(0.832682, 0.390898, 0, 0.42)

[node name="HitBox" parent="." instance=ExtResource("3_2vw7o")]

[node name="CollisionShape2D" type="CollisionShape2D" parent="HitBox"]
position = Vector2(0, -26)
scale = Vector2(4, 4)
shape = SubResource("CircleShape2D_a2eqe")
debug_color = Color(0.414009, 0.602297, 7.70092e-07, 0.42)

[node name="Sprite2D" type="Sprite2D" parent="."]
position = Vector2(0, -21)
scale = Vector2(0.19, 0.19)
texture = ExtResource("4_oyv7d")
hframes = 16
vframes = 3
frame = 1

[node name="AttackHurtBox" parent="Sprite2D" instance=ExtResource("2_noqj8")]
position = Vector2(0, 110.526)
scale = Vector2(5.26316, 5.26316)

[node name="CollisionShape2D" type="CollisionShape2D" parent="Sprite2D/AttackHurtBox"]
position = Vector2(0, -26)
scale = Vector2(4, 4)
shape = SubResource("CircleShape2D_a2eqe")
debug_color = Color(0.832682, 0.390898, 0, 0.42)

[node name="CollisionShape2D" type="CollisionShape2D" parent="."]
position = Vector2(0, -26)
shape = SubResource("CircleShape2D_i52ds")

[node name="AnimationPlayer" type="AnimationPlayer" parent="."]
libraries = {
&"": SubResource("AnimationLibrary_i52ds")
}

[node name="KillerStateMachine" type="Node" parent="."]
script = ExtResource("5_eyuaa")

[node name="Idle" type="Node" parent="KillerStateMachine" node_paths=PackedStringArray("after_idle_state")]
script = ExtResource("6_ppofv")
after_idle_state = NodePath("../Wander")

[node name="Stun" type="Node" parent="KillerStateMachine" node_paths=PackedStringArray("next_state")]
script = ExtResource("7_dq1m6")
next_state = NodePath("../Chase")

[node name="Wander" type="Node" parent="KillerStateMachine"]
script = ExtResource("8_xy18j")
anim_name = "walk"
wander_speed = 30.0
state_animation_duration = 0.45

[node name="Destroy" type="Node" parent="KillerStateMachine"]
script = ExtResource("9_yyq81")

[node name="Chase" type="Node" parent="KillerStateMachine" node_paths=PackedStringArray("vision_area", "attack_area", "next_state")]
script = ExtResource("10_adseb")
chase_speed = 70.0
vision_area = NodePath("../../VisionArea")
attack_area = NodePath("../../Sprite2D/AttackHurtBox")
next_state = NodePath("../Idle")

[node name="VisionArea" parent="." instance=ExtResource("11_fjut8")]

[node name="CollisionPolygon2D" type="CollisionPolygon2D" parent="VisionArea"]
position = Vector2(-3, -285)
scale = Vector2(1.53281, 2.57188)
polygon = PackedVector2Array(-200, 0, 200, 0, 200, 200, -200, 200)
